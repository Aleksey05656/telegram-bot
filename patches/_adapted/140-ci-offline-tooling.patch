--- a/.github/workflows/ci.yml
+++ b/.github/workflows/ci.yml
@@ -28,11 +28,9 @@
         run: |
           python -m pip install -U pip
           if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
-      - name: Install pre-commit hooks
-        run: |
-          pip install pre-commit
-          pre-commit install-hooks
-      - name: Lint
-        run: pre-commit run --all-files
+      - name: Install pre-commit
+        run: pip install pre-commit
+      - name: Lint (online with offline fallback)
+        run: make pre-commit-smart
       - name: Test
         run: pytest -q
