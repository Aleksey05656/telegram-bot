## Задача: Миграция конфигов на Pydantic v2
- **Статус**: Завершена
- **Описание**: Перевести конфигурацию на pydantic v2 и настроить pydantic-settings.
- **Шаги выполнения**:
  - [x] Обновлены зависимости и pyproject.toml
  - [x] Реализован пакет app с настройками и наблюдаемостью
  - [x] Добавлены тесты настроек
- **Зависимости**: —

## Задача: Наблюдаемость Sentry и Prometheus
- **Статус**: Завершена
- **Описание**: Подключить Sentry, экспорт Prometheus и метрики ECE/LogLoss с алёртом.
- **Шаги выполнения**:
  - [x] Добавлены зависимости и настройки
  - [x] Реализован модуль метрик и HTTP-сервер
  - [x] Интеграция с Sentry и оповещение при ECE>0.05
- **Зависимости**: Project.md (разделы 3,6)

## Задача: Валидация команд и rate-limit
- **Статус**: Завершена
- **Описание**: Добавить Pydantic-модели команд, валидацию обработчиков и middleware rate-limit.
- **Шаги выполнения**:
  - [x] Созданы Pydantic-модели команд
  - [x] Добавлена валидация в обработчики
  - [x] Реализовано и подключено middleware rate-limit
- **Зависимости**: Project.md (разделы 3,7)

## Задача: Настройка тестов и CI
- **Статус**: Завершена
- **Описание**: Добавить юнит-тесты для services и ml, настроить pre-commit и GitHub Actions.
- **Шаги выполнения**:
  - [x] Добавлены unit-тесты для services и ml
  - [x] Настроен pre-commit с Black, Ruff и mypy
  - [x] Добавлен workflow для линтеров и pytest
- **Зависимости**: —

## Задача: Очистка конфликтов и обновление зависимостей
- **Статус**: В процессе
- **Описание**: Удалить конфликтные маркеры, свести зависимости и пересобрать окружение.
- **Шаги выполнения**:
  - [x] Удалены маркеры конфликтов в main.py и requirements.txt
  - [x] Сведены зависимости в requirements.txt без повторов
  - [ ] Пересобрать окружение
- **Зависимости**: —

## Задача: Базовые λ (Poisson-GLM) с валидацией
- **Статус**: В процессе
- **Описание**: Обучить GLM по xG/xGA с recency-весами и L2, зафиксировать λ_base и экспортировать model_info.json.
- **Шаги выполнения**:
  - [x] Подготовить датасет
  - [ ] Обучить и зафиксировать артефакты
  - [ ] Добавить unit-тесты на инварианты
- **Зависимости**: Project.md (раздел 4.1)

## Задача: Динамические модификаторы (обучаемый мультипликатор)
- **Статус**: Не начата
- **Описание**: Реализовать f(context) c оффсетом log(λ_base), каппинг 0.7–1.4, логирование факторов.
- **Шаги выполнения**:
  - [ ] Сформировать контекстные фичи
  - [ ] Обучить модель и провести калибровку
  - [ ] Интегрировать в prediction_pipeline
- **Зависимости**: GLM (λ_base)

## Задача: Монте-Карло и Bi-Poisson
- **Статус**: Не начата
- **Описание**: Реализовать симуляции ≥10k, рынки 1X2/Totals/BTTS/точные счёта, экспорт вероятностей.
- **Шаги выполнения**:
  - [ ] Реализовать симулятор и корреляцию
  - [ ] Добавить калибровку и отчёт по ECE
  - [ ] Записать прогнозы в БД
- **Зависимости**: λ_final

## Задача: Рефакторинг ML-слоёв
- **Статус**: Завершена
- **Описание**: Вынести базовые λ, модификаторы, калибровку и симулятор в ml/*.
- **Шаги выполнения**:
  - [x] Создать base_poisson_glm, modifiers_model, calibration, montecarlo_simulator
  - [x] Обновить импорты в services, scripts и telegram
- **Зависимости**: Project.md (разделы 3-4)

## Задача: Логирование времени и Redis-lock
- **Статус**: Завершена
- **Описание**: Добавить middleware для измерения времени обработки и Redis-lock при генерации прогнозов.
- **Шаги выполнения**:
  - [x] Реализовано middleware замера времени и логирования p95/avg
  - [x] Подключено middleware в Dispatcher
  - [x] Добавлен Redis-lock в prediction_worker
- **Зависимости**: —

## Задача: Документирование лиг и валидация колонок
- **Статус**: Завершена
- **Описание**: Добавить список лиг и глубину ретро, описать ожидаемые колонки и их проверки, уточнить вопросы по данным.
- **Шаги выполнения**:
  - [x] Дополнен Project.md лигами и глубиной исторических данных
  - [x] Добавлены проверки обязательных колонок в data_processor.py
  - [x] Обновлён qa.md с уточнёнными вопросами по данным
- **Зависимости**: Project.md (раздел 5), services/data_processor.py
