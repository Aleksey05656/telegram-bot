# Diary.md — Технический дневник проекта

## Запись от 2025-08-23
### Наблюдения
- Зафиксирована архитектура трёх уровней: базовые λ (GLM), модификаторы (обучаемый мультипликатор), Монте-Карло/двумерный Пуассон.
- Инварианты: λ≥0; expected_total=λH+λA; idempotency по (fixture_id, model_version).

### Решения
- В БД вводится UNIQUE(fixture_id, model_version) и upsert при записи.
- Стандартизированы Redis-ключи и добавлен Redis-lock per fixture.
- Метрики качества: LogLoss/Brier/ECE; алёрты ECE>0.05.

### Проблемы
- Риск превышения лимитов SportMonks при массовой прогрузке → требуется батчинг и агрессивный кэш.
- ΔxGOT шумный на коротких окнах → нужен сглаживающий фильтр.

